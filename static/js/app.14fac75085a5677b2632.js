webpackJsonp([1],{0:function(e,t){},"1/oy":function(e,t){},"5W1q":function(e,t){},"9M+g":function(e,t){},GfHa:function(e,t){},Id91:function(e,t){},Jmt5:function(e,t){},L8yd:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")({name:"App"},r,!1,function(e){n("efAC")},null,null).exports,o=n("/ocq"),s=n("mvHQ"),l=n.n(s);var d=new a.a,c={name:"SingleGame",data:function(){return{msg:"Welcome to reports",fields:["name","isChosen"],gameFields:["player","role","score"],scoreList:[0,1,1.5],chosenPlayers:[],roleList:[{roleId:"01",name:"派西维尔"},{roleId:"02",name:"梅林"},{roleId:"03",name:"忠臣"},{roleId:"04",name:"莫甘娜"},{roleId:"05",name:"刺客"},{roleId:"06",name:"莫德雷德"},{roleId:"07",name:"奥伯伦"},{roleId:"08",name:"爪牙"}],playerList:[{id:"001",name:"杨叔叔"},{id:"002",name:"胖胖"},{id:"003",name:"美霁"},{id:"004",name:"仪"},{id:"005",name:"Sager"},{id:"006",name:"幺鸡"},{id:"007",name:"番茄"},{id:"008",name:"王小胃"},{id:"009",name:"Murphy"},{id:"010",name:"因扎吉"},{id:"011",name:"菠萝蜜"},{id:"012",name:"平田"},{id:"013",name:"Sager"},{id:"014",name:"Sager"},{id:"015",name:"潇洒小胖"},{id:"016",name:"张老师"},{id:"017",name:"李日天"},{id:"018",name:"深紫色"},{id:"019",name:"Ww"},{id:"020",name:"吃吃"},{id:"021",name:"气体"},{id:"022",name:"混沌"},{id:"023",name:"刘神仙"},{id:"024",name:"抱抱徐"},{id:"025",name:"195"}],gameRound:{date:"",info:[{playerNo:"01",playerId:"009",roleId:"01",score:"1",victory:"false"}]}}},methods:{selectPlayer:function(e){-1==this.chosenPlayers.indexOf(e.id)?this.chosenPlayers.push(e.id):this.chosenPlayers.splice(this.chosenPlayers.findIndex(function(t){return t===e.id}),1)},isPlayerSelected:function(e){e.id;return-1!=this.chosenPlayers.indexOf(e.id)},getPlayerNo:function(e){return this.chosenPlayers.findIndex(function(t){return t===e.id})+1},clearChosenPlayers:function(){this.chosenPlayers=[],this.gameRound.info=[]},generateGameInfo:function(){var e=this.chosenPlayers.map(function(e,t){return{playerNo:t+1,playerId:e,roleId:"01",score:0,victory:!1}});this.gameRound.info=e},getPlayerNameById:function(e){return this.playerList[this.playerList.findIndex(function(t){return t.id===e})].name},getRoleNameById:function(e){return this.roleList.find(function(t){return t.roleId===e}).name},switchRole:function(e){var t=e.roleId,n=e.playerNo;t=Number(t)<8?"0"+(Number(t)+1):"01",this.gameRound.info[Number(n)-1].roleId=t},updateScore:function(e){var t=e.score,n=this.scoreList.findIndex(function(e){return e==t}),a=e.playerNo;t=Number(t)<1.5?this.scoreList[n+1]:this.scoreList[0],this.gameRound.info[Number(a)-1].score=t},saveGameRound:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1;String(n).length<2&&(n="0"+n);var a=""+e.getFullYear()+n+t;this.gameRound.date=a,function(e){window.localStorage.hasOwnProperty("gameRounds")||window.localStorage.setItem("gameRounds","[]");var t=JSON.parse(window.localStorage.getItem("gameRounds"));t.push(e),window.localStorage.setItem("gameRounds",l()(t))}(this.gameRound),d.$emit("updateRank")},showModal2:function(){this.$refs.myModalRef.show()},hideModal2:function(){this.$refs.myModalRef.hide(),this.saveGameRound()}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"playerList"}},[n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal1",modifiers:{modal1:!0}}],attrs:{variant:"primary",size:"sm"}},[e._v("添加/修改玩家")]),e._v(" "),n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:e.showModal2}},[e._v("\n    保存该局结果\n  ")]),e._v(" "),n("b-modal",{attrs:{id:"modal1",title:"选择玩家","cancel-title":"清空","ok-title":"确定"},on:{cancel:function(t){e.clearChosenPlayers()},ok:function(t){e.generateGameInfo()}}},[n("b-list-group",e._l(e.playerList,function(t,a){return n("b-list-group-item",{key:t.id,staticClass:"d-flex justify-content-between align-items-center",on:{click:function(n){e.selectPlayer(t)}}},[e._v("\n          "+e._s(t.name)+"\n          "),e.isPlayerSelected(t)?n("b-badge",{attrs:{variant:"primary",pill:""}},[e._v(e._s(e.getPlayerNo(t)))]):e._e()],1)}),1)],1),e._v(" "),n("b-modal",{ref:"myModalRef",attrs:{"hide-footer":"",title:"友情提示"}},[n("div",{staticClass:"d-block text-center"},[n("h3",[e._v("确认保存该结果？")])]),e._v(" "),n("b-btn",{staticClass:"mt-3",attrs:{variant:"outline-danger",block:""},on:{click:e.hideModal2}},[e._v("100%确认")])],1)],1),e._v(" "),n("div",{attrs:{id:"gameRound"}},[n("b-list-group",e._l(e.gameRound.info,function(t,a){return e.chosenPlayers.length>0?n("b-list-group-item",{key:t.playerNo},[n("b-badge",{staticClass:"player-no-badge",attrs:{variant:"primary",pill:""}},[e._v(e._s(t.playerNo))]),e._v(" "),n("span",{staticClass:"player-name"},[e._v(e._s(e.getPlayerNameById(t.playerId)))]),e._v(" "),n("button",{staticClass:"role-name",on:{click:function(n){e.switchRole(t)}}},[Number(t.roleId)<4?n("i",{staticClass:"fa fa-user-circle"}):e._e(),e._v(" "),Number(t.roleId)>3?n("i",{staticClass:"fa fa-user-circle-o"}):e._e(),e._v(e._s(e.getRoleNameById(t.roleId)))]),e._v(" "),n("button",{staticClass:"player-score",on:{click:function(n){e.updateScore(t)}}},[e._v(e._s(t.score))]),e._v(" "),n("span",{staticClass:"victory"},[t.score>0?n("i",{staticClass:"fa fa-check"}):e._e(),e._v(" "),0==t.score?n("i",{staticClass:"fa fa-close"}):e._e()])],1):e._e()}),1)],1)])},staticRenderFns:[]};var m=n("VU/8")(c,u,!1,function(e){n("OTlv")},"data-v-551d2057",null).exports,f=n("BO1k"),v=n.n(f),y={name:"Rank",created:function(){this.addScoreAttr(),this.getRankList()},mounted:function(){var e=this;d.$on("updateRank",function(){e.getRankList()})},data:function(){return{rankList:[],playerList:[{id:"001",name:"杨叔叔"},{id:"002",name:"胖胖"},{id:"003",name:"美霁"},{id:"004",name:"仪"},{id:"005",name:"Sager"},{id:"006",name:"幺鸡"},{id:"007",name:"番茄"},{id:"008",name:"王小胃"},{id:"009",name:"Murphy"},{id:"010",name:"因扎吉"},{id:"011",name:"菠萝蜜"},{id:"012",name:"平田"},{id:"013",name:"Sager"},{id:"014",name:"Sager"},{id:"015",name:"潇洒小胖"},{id:"016",name:"张老师"},{id:"017",name:"李日天"},{id:"018",name:"深紫色"},{id:"019",name:"Ww"},{id:"020",name:"吃吃"},{id:"021",name:"气体"},{id:"022",name:"混沌"},{id:"023",name:"刘神仙"},{id:"024",name:"抱抱徐"},{id:"025",name:"195"}]}},methods:{getPlayerNameById:function(e){return this.rankList[this.rankList.findIndex(function(t){return t.id===e})].name},getBtnVariant:function(e){return e<3?"danger":"primary"},getRankList:function(){this.clearScore();var e=window.localStorage.hasOwnProperty("gameRounds")?JSON.parse(window.localStorage.getItem("gameRounds")):[],t=!0,n=!1,a=void 0;try{for(var r,i=v()(e);!(t=(r=i.next()).done);t=!0){var o=r.value.info,s=!0,l=!1,d=void 0;try{for(var c,u=v()(o);!(s=(c=u.next()).done);s=!0){var m=c.value,f=m.playerId,y=!0,h=!1,p=void 0;try{for(var g,_=v()(this.playerList);!(y=(g=_.next()).done);y=!0){var b=g.value;b.id==f&&(b.score=Number(b.score)+Number(m.score))}}catch(e){h=!0,p=e}finally{try{!y&&_.return&&_.return()}finally{if(h)throw p}}}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){n=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw a}}this.sortRankList(this.playerList)},addScoreAttr:function(){var e=!0,t=!1,n=void 0;try{for(var a,r=v()(this.playerList);!(e=(a=r.next()).done);e=!0){var i=a.value;i.hasOwnProperty("score")||(i.score=0)}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}},clearScore:function(){var e=!0,t=!1,n=void 0;try{for(var a,r=v()(this.playerList);!(e=(a=r.next()).done);e=!0){var i=a.value;i.hasOwnProperty("score")&&(i.score=0)}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}},sortRankList:function(e){e.sort(function(e,t){var n=e.score,a=t.score;return n<a?1:n>a?-1:0});this.rankList=this.playerList}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"rankList"}},[n("h4",[e._v("英雄榜")]),e._v(" "),n("b-list-group",e._l(e.rankList,function(t,a){return e.rankList.length>0?n("b-list-group-item",{key:t.id},[n("b-badge",{staticClass:"player-no-badge",attrs:{variant:e.getBtnVariant(a),pill:""}},[e._v(e._s(a+1))]),e._v(" "),n("span",{staticClass:"player-name"},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticClass:"score"},[e._v(e._s(t.score))])],1):e._e()}),1)],1)},staticRenderFns:[]};var p={name:"Reports",data:function(){return{msg:"Welcome to reports"}},methods:{clearHistory:function(){window.localStorage.clear(),d.$emit("updateRank")}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-btn",{attrs:{variant:"primary",size:"sm"},on:{click:function(t){e.clearHistory()}}},[e._v("清除本地测试数据")])],1)},staticRenderFns:[]},_={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}},components:{SingleGame:m,Rank:n("VU/8")(y,h,!1,function(e){n("scEV")},"data-v-133f73ea",null).exports,Reports:n("VU/8")(p,g,!1,null,null,null).exports}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hello"},[t("b-card",{attrs:{"no-body":""}},[t("b-tabs",{attrs:{card:""}},[t("b-tab",{attrs:{"no-body":"",title:"单日局",active:""}},[t("single-game")],1),this._v(" "),t("b-tab",{attrs:{"no-body":"",title:"积分排名"}},[t("rank")],1),this._v(" "),t("b-tab",{attrs:{title:"报告"}},[t("reports")],1)],1)],1)],1)},staticRenderFns:[]};var R=n("VU/8")(_,b,!1,function(e){n("L8yd")},"data-v-1f3bd5ac",null).exports;a.a.use(o.a);var w=new o.a({mode:"history",routes:[{path:"/",name:"HelloWorld",component:R}]}),I=n("e6fC"),k=n("8+8L");n("Jmt5"),n("9M+g"),n("5W1q");a.a.use(I.a),a.a.use(k.a),a.a.prototype.$EventBus=new a.a,a.a.config.productionTip=!1,new a.a({el:"#app",router:w,components:{App:i},template:"<App/>"})},OTlv:function(e,t){},efAC:function(e,t){},scEV:function(e,t){},zj2Q:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.14fac75085a5677b2632.js.map